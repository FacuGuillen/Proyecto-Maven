<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<!-- Incluir el fragmento del head -->
<div th:replace="template/head"></div>
<style>
  .card-img-top-custom {
    width: 100%;
    height: 250px; /* Establece la altura deseada */
    object-fit: cover; /* Hace que la imagen se ajuste al contenedor sin perder proporción */
  }
  .card{
    background-color: rgba(239, 231, 218, 0.6); /* 0.8 es la opacidad, ajústala según necesites */
  }
</style>
<body>
<!-- Incluir el fragmento del navbar -->
<div th:replace="template/navbar"></div>
<div class="contenedor-principal d-flex">
  <!-- Incluir el fragmento del sidebar -->
  <div th:replace="template/sidebar"></div>
  <!-- Main content -->
  <main role="main" class="container mt-3">
    <form class="d-flex" role="search">
      <input class="form-control me-2" type="search" placeholder="Buscar Material" aria-label="Search">
      <button class="btn btn-outline-success" type="submit" id="btn-buscador-materiales">Buscar</button>
    </form>
    <div class="d-flex justify-content-between align-items-center my-4">
      <h2>Mis Publicaciones</h2>
      <a th:href="@{/ofertar}" class="btn btn-primary col-sm-2 col-md-2 col-lg-2"><i class="fas fa-hand-holding-usd icon"></i> Ofertar Material</a>
    </div>

    <div class="row gap-4">
      <!-- Card for each publication -->
      <!--Prueba-->
      <div th:each="publicacion: ${publicaciones}" class="card col-md-4 mb-4 shadow-sm" style="width: 26rem;">
        <img th:src="${publicacion.urlImagen}" class="card-img-top-custom" alt="cemento">
        <div class="card-body">
          <h5 class="card-title">Titulo: <span th:text="${publicacion.nombre}" ></span></h5>
          <p class="card-text">Precio: <span th:text="${publicacion.precio}" ></span></p>
          <p class="card-text">Cantidad disponible:<span th:text="${publicacion.stock}" ></span></p>
          <p class="card-text">Ubicación: Buenos Aires, Argentina</p>
          <div class="d-flex justify-content-between align-items-center">
            <div>
<!--              <a href="#" class="btn btn-primary">Editar</a>-->
              <!--<a href="#" class="btn btn-primary">Editar</a>-->
                <a th:href="@{/editar}" class="btn btn-primary ">Editar</a>
              <!-- Button trigger modal -->
              <a href="#" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">Eliminar</a>

              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">Eliminar publicación</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      ¿Estas seguro que quiere eliminar esta publicación?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
<!--                      <button> th:href="@{/eliminar-publicacion/{id}(id=${publicacion.id})}"-->
<!--                         class="btn btn-primary btn-primary-delete">Eliminar publicación</button>-->
                      <form th:action="@{/eliminar-publicacion/{id}(id=${publicacion.id})}" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Eliminar publicación</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckCheckedr" checked>
              <label class="form-check-label" for="flexSwitchCheckCheckedr">Pausado</label>
            </div>
          </div>
        </div>
      </div>


     <!-- 2
      <div class="card col-md-4 mb-4 shadow-sm" style="width: 26rem;">
        <img th:src="@{/images/ladrillos.jpg}" class="card-img-top-custom" alt="cemento">
        <div class="card-body">
          <h5 class="card-title">Ladrillos pallet 144u</h5>
          <p class="card-text">Precio: $60.000</p>
          <p class="card-text">Cantidad disponible: 1 unidad</p>
          <p class="card-text">Ubicación: Mendoza, Argentina</p>
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <a href="#" class="btn btn-primary">Editar</a>
              <a href="#" class="btn btn-danger">Eliminar</a>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckCheckeda" checked>
              <label class="form-check-label" for="flexSwitchCheckCheckeda">Pausado</label>
            </div>
          </div>
        </div>
      </div>

      &lt;!&ndash;3&ndash;&gt;
      <div class="card col-md-4 mb-4 shadow-sm" style="width: 26rem;">
        <img th:src="@{/images/baldozas.webp}" class="card-img-top-custom" alt="cemento">
        <div class="card-body">
          <h5 class="card-title">Baldozas x25u</h5>
          <p class="card-text">Precio: $25.000</p>
          <p class="card-text">Cantidad disponible: 1 unidad</p>
          <p class="card-text">Ubicación: Buenos Aires, Argentina</p>
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <a href="#" class="btn btn-primary">Editar</a>
              <a href="#" class="btn btn-danger">Eliminar</a>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckCheckede" checked>
              <label class="form-check-label" for="flexSwitchCheckCheckede">Pausado</label>
            </div>
          </div>
        </div>
      </div>-->
    </div>
  </main>

</div>


<!-- Boostrap core js -->
<script type="text/javascript" th:src="@{webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/main.js}"></script>
<script type="text/javascript" th:src="@{/js/mis-publicaciones.js}"></script>
</body>
</html>